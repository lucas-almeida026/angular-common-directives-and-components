{"version":3,"file":"ng-resize-observer.js","sources":["ng://ng-resize-observer/lib/resize-observer.ts","ng://ng-resize-observer/lib/ng-resize-observer.service.ts","ng://ng-resize-observer/lib/ponyfill.module.ts","ng://ng-resize-observer/public-api.ts","ng://ng-resize-observer/ng-resize-observer.ts"],"sourcesContent":["import { InjectionToken } from \"@angular/core\";\nimport { ResizeObserver } from \"@juggle/resize-observer\";\n\ndeclare var window: any;\n\nexport type ResizeObserverClass = {\n  new(callback: (entries: any[]) => void): ResizeObserver;\n};\n\nexport const RESIZE_OBSERVER = new InjectionToken<ResizeObserverClass>(\n  \"Resize Observer\",\n  {\n    providedIn: \"root\",\n    factory: () => window.ResizeObserver || null\n  }\n);\n","import {\n  ChangeDetectorRef,\n  ElementRef,\n  Inject,\n  Injectable,\n  OnDestroy,\n  Optional,\n} from \"@angular/core\";\nimport { ResizeObserver, ResizeObserverEntry } from \"@juggle/resize-observer\";\nimport { Observable, Subject } from \"rxjs\";\nimport { RESIZE_OBSERVER, ResizeObserverClass } from \"./resize-observer\";\n\nexport class NgResizeObserver extends Observable<ResizeObserverEntry> {}\n\n@Injectable()\nexport class ResizeObserverService implements OnDestroy {\n  private onResizeSubject = new Subject<ResizeObserverEntry>();\n  private resizeObserver: ResizeObserver;\n  public onResize: Observable<\n    ResizeObserverEntry\n  > = this.onResizeSubject.asObservable();\n\n  constructor(\n    private chgRef: ChangeDetectorRef,\n    @Optional() private el: ElementRef,\n    @Inject(RESIZE_OBSERVER)\n    private ResizeObserver: ResizeObserverClass\n  ) {\n    if (this.el === null) {\n      console.error(\n        `ng-resize-observer: No provider for ElementRef. This error is most likely because you added the ng-resize-observer provider in a @NgModule. Only add ng-resize-observer on @Component()`\n      );\n      return;\n    }\n\n    if (this.ResizeObserver === null) {\n      console.error(\n        `ng-resize-observer: ResizeObserver not available. Use the ponyfill module: NgResizeObserverPonyfillModule.`\n      );\n      return;\n    }\n\n    this.observe();\n  }\n\n  ngOnDestroy() {\n    this.unobserve();\n    this.onResizeSubject.complete();\n  }\n\n  private observe() {\n    this.resizeObserver = new this.ResizeObserver((entries) => {\n      const entry = entries && entries[0];\n      if (entry) {\n        this.onResizeSubject.next(entry);\n        this.chgRef.detectChanges();\n      }\n    });\n    this.resizeObserver.observe(this.target);\n  }\n\n  private unobserve() {\n    this.resizeObserver.unobserve(this.target);\n  }\n\n  private get target() {\n    return this.el.nativeElement;\n  }\n}\n\nexport function ngResizeObserverFactory(\n  resizeObserverService: ResizeObserverService\n) {\n  return resizeObserverService.onResize;\n}\n\nexport const NgResizeObserverProvider = {\n  provide: NgResizeObserver,\n  useFactory: ngResizeObserverFactory,\n  deps: [ResizeObserverService],\n};\n","import { NgModule } from \"@angular/core\";\nimport { RESIZE_OBSERVER } from \"./resize-observer\";\nimport { ResizeObserver as Polyfill } from \"@juggle/resize-observer\";\n\ndeclare var window: any;\n\nexport function ponyFillFactory() {\n  return window.ResizeObserver || Polyfill;\n};\n\nexport const polyfillProvider = { provide: RESIZE_OBSERVER, useFactory: ponyFillFactory };\n\n@NgModule({\n  providers: [polyfillProvider]\n})\nexport class NgResizeObserverPonyfillModule {}\n","import {\n  NgResizeObserverProvider,\n  ResizeObserverService,\n  NgResizeObserver\n} from \"./lib/ng-resize-observer.service\";\nimport {\n  NgResizeObserverPonyfillModule,\n  polyfillProvider\n} from \"./lib/ponyfill.module\";\n\nconst ngResizeObserverProviders = [\n  NgResizeObserverProvider,\n  ResizeObserverService\n];\n\nconst ngResizeObserverProvidersWithPonyfill = [\n  ...ngResizeObserverProviders,\n  polyfillProvider\n];\n\n/*\n * Public API Surface of ng-resize-observer\n */\nexport {\n  NgResizeObserver,\n  ngResizeObserverProviders,\n  ngResizeObserverProvidersWithPonyfill,\n  NgResizeObserverPonyfillModule\n};\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {NgResizeObserverProvider as ɵc,ResizeObserverService as ɵa,ngResizeObserverFactory as ɵb} from './lib/ng-resize-observer.service';\nexport {polyfillProvider as ɵe,ponyFillFactory as ɵd} from './lib/ponyfill.module';\nexport {RESIZE_OBSERVER as ɵg,ResizeObserverClass as ɵf} from './lib/resize-observer';"],"names":["Polyfill"],"mappings":";;;;;MASa,eAAe,GAAG,IAAI,cAAc,CAC/C,iBAAiB,EACjB;IACE,UAAU,EAAE,MAAM;IAClB,OAAO,EAAE,MAAM,MAAM,CAAC,cAAc,IAAI,IAAI;CAC7C;;MCFU,gBAAiB,SAAQ,UAA+B;CAAG;AAGxE,IAAa,qBAAqB,GAAlC,MAAa,qBAAqB;IAOhC,YACU,MAAyB,EACb,EAAc,EAE1B,cAAmC;QAHnC,WAAM,GAAN,MAAM,CAAmB;QACb,OAAE,GAAF,EAAE,CAAY;QAE1B,mBAAc,GAAd,cAAc,CAAqB;QAVrC,oBAAe,GAAG,IAAI,OAAO,EAAuB,CAAC;QAEtD,aAAQ,GAEX,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;QAQtC,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,EAAE;YACpB,OAAO,CAAC,KAAK,CACX,yLAAyL,CAC1L,CAAC;YACF,OAAO;SACR;QAED,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,EAAE;YAChC,OAAO,CAAC,KAAK,CACX,4GAA4G,CAC7G,CAAC;YACF,OAAO;SACR;QAED,IAAI,CAAC,OAAO,EAAE,CAAC;KAChB;IAED,WAAW;QACT,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;KACjC;IAEO,OAAO;QACb,IAAI,CAAC,cAAc,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,CAAC,OAAO;YACpD,MAAM,KAAK,GAAG,OAAO,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC;YACpC,IAAI,KAAK,EAAE;gBACT,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACjC,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;aAC7B;SACF,CAAC,CAAC;QACH,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC1C;IAEO,SAAS;QACf,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC5C;IAED,IAAY,MAAM;QAChB,OAAO,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC;KAC9B;CACF,CAAA;;YA7CmB,iBAAiB;YACT,UAAU,uBAAjC,QAAQ;4CACR,MAAM,SAAC,eAAe;;AAVd,qBAAqB;IADjC,UAAU,EAAE;IAUR,WAAA,QAAQ,EAAE,CAAA;IACV,WAAA,MAAM,CAAC,eAAe,CAAC,CAAA;GAVf,qBAAqB,CAqDjC;SAEe,uBAAuB,CACrC,qBAA4C;IAE5C,OAAO,qBAAqB,CAAC,QAAQ,CAAC;AACxC,CAAC;AAED,MAAa,wBAAwB,GAAG;IACtC,OAAO,EAAE,gBAAgB;IACzB,UAAU,EAAE,uBAAuB;IACnC,IAAI,EAAE,CAAC,qBAAqB,CAAC;CAC9B;;SC1Ee,eAAe;IAC7B,OAAO,MAAM,CAAC,cAAc,IAAIA,cAAQ,CAAC;AAC3C,CAAC;AAAA,CAAC;AAEF,MAAa,gBAAgB,GAAG,EAAE,OAAO,EAAE,eAAe,EAAE,UAAU,EAAE,eAAe,EAAE,CAAC;AAK1F,IAAa,8BAA8B,GAA3C,MAAa,8BAA8B;CAAG,CAAA;AAAjC,8BAA8B;IAH1C,QAAQ,CAAC;QACR,SAAS,EAAE,CAAC,gBAAgB,CAAC;KAC9B,CAAC;GACW,8BAA8B,CAAG;;MCLxC,yBAAyB,GAAG;IAChC,wBAAwB;IACxB,qBAAqB;CACtB,CAAC;AAEF,MAAM,qCAAqC,GAAG;IAC5C,GAAG,yBAAyB;IAC5B,gBAAgB;CACjB;;AClBD;;GAEG;;;;"}